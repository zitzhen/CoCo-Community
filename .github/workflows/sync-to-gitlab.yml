name: Sync GitHub  to Gitee 

on:
  push:
    branches:
      - main  # æˆ–ä½ å¸Œæœ›è§¦å‘  åŒæ­¥çš„åˆ†æ”¯

jobs:
  sync-:
    runs-on: ubuntu-latest
    env:
      GITEE_USERNAME: hello-oliver
      GITEE_ORG: zitzhen
      GITEE_REPO: CoCo-Community
      GITEE_TOKEN: ${{ secrets.GITEE_TOKEN }}

    steps:
      - name: Clone GitHub  repo
        run: |
          echo "ğŸš€ å…‹éš† GitHub  ä»“åº“..."
          git clone --bare https://github.com/zitzhen/CoCo-Community.git -repo
          cd -repo

          echo "ğŸ”— æ·»åŠ  Gitee  è¿œç¨‹ä»“åº“..."
          git remote remove gitee 2>/dev/null || true
          git remote add gitee "https://${GITEE_USERNAME}:${GITEE_TOKEN}@gitee.com/${GITEE_ORG}/${GITEE_REPO}.git"

          echo "âœ… éªŒè¯è¿œç¨‹ï¼š"
          git remote -v

          echo "â¬†ï¸ æ¨é€  åˆ° Gitee..."
          git push gitee --mirror || { echo "âŒ æ¨é€å¤±è´¥"; exit 1; }

          echo "ğŸ‰  æ¨é€å®Œæˆï¼"