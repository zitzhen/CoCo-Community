name: Sync GitHub Repo to Gitee

on:
  push:
    branches:
      - main  # 监听 main 分支

jobs:
  sync-gitee:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout GitHub Repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Push to Gitee Organization
        env:
          GITEE_USERNAME: hello-oliver          # 你的 Gitee 登录名
          GITEE_ORG: zitzhen                    # 组织名
          GITEE_REPO: CoCo-Community            # 仓库名
          GITEE_TOKEN: ${{ secrets.GITEE_TOKEN }}
        run: |
          git remote add gitee https://${GITEE_USERNAME}:${GITEE_TOKEN}@gitee.com/${GITEE_ORG}/${GITEE_REPO}.git

          git config credential.helper store
          echo "https://${GITEE_USERNAME}:${GITEE_TOKEN}@gitee.com" > ~/.git-credentials

          git push gitee --all
          git push gitee --tags