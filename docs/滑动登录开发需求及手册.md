Github Issues:https://github.com/zitzhen/CoCo-Community/issues/682
## 前景讨论
### 非「滑动过期」
在之前，我们一直都采用保存用户状态7天的流程。但是这并不好，这会导致7天后用户需要重新登录。因为用户浏览器的Cookie被过期删除了，相当于给用户进行强制退出了。

我们应该优化一下，并实现「滑动过期」
### 新方案——「滑动过期」
指用户在登录状态访问网站时，今天登录了，有效期为7天。当明天访问网站时，后端检查到了他的登录，那么我们就将用户的Cookie延长到7天后再过期。以此实现「滑动过期」

### 安全与风险
- 可采用“渐进式滑动过期”，避免用户的设备出现被盗情况。攻击者通过无限延长机制一直活跃。
### 定义：“渐进式滑动过期”
指在用户登录后的延长时间的区别，如下图：
- 第一天登录=>设置默认到期时间为7天后到期。
- 二次活跃=>延长Cookie到期时间为3天
> [!NOTE]
> 这里所指的`7天`，`3天`等，这类时间并不固定，后期可适当调整。
## 数据透视
## 表格
## 用户操作与服务执行

| 用户操作  | 执行操作              |
| ----- | ----------------- |
| 第一次登录 | 设置Cookie默认到期时间为7天 |
| 二次活跃  | 设置Cookie到期时间延长3天  |
## 各项数据的极限
>[!tip]
>仅做预计

最短生命周期：未定
最长生命周期：30天

## 实现方式及代码
### 方案概括与思路
通过每次访问发送一次请求到 Edge function ,Edge function发回指令更新浏览器Cookite到期时间。
最长生命周期通过另一个Cookite记录登录日期，已登录>=30天的将强制过期Cookite强制退出登录。
### 代码实践
我们在`src/views/inex.vue`中，有这样一段代码
```js
checkLoginStatus().then((logininformation) => {
    if (!logininformation || !logininformation.authenticated) {
      this.username = '未登录用户';
      this.avatar = '/images/user.png';
    } else {
      this.username = logininformation.user.name || logininformation.user.login;
      this.avatar = logininformation.user.avatar_url || '/images/user.png';
    }
```
我们已经向后端发送了存放在浏览器Cookite的token，进行查询。
那么我们可以更改后端的Edge function的代码，同时增加延期操作。